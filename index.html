<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Primary Meta Tags -->
    <title>Eclini - Sistema para Clínicas</title>
    <meta name="title" content="Eclini - Sistema para Clínicas" />
    <meta name="description" content="Sistema de gestão para clínicas médicas e consultórios. Agendamento online, prontuário eletrônico, controle financeiro." />
    <meta name="keywords" content="sistema para clínicas, gestão de clínicas, agendamento online, prontuário eletrônico" />
    <meta name="author" content="Tecmax Tecnologia" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://sisvida.lovable.app" />
    
    <!-- PWA iOS meta tags base -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    
    <!--
      CRÍTICO PARA INSTALABILIDADE NO CHROME ANDROID:
      
      O Chrome Android lê o <link rel="manifest"> no momento do parsing do HTML,
      ANTES do JavaScript ser executado. Por isso usamos um script síncrono no <head>
      para injetar o manifest correto via createElement (não document.write, pois
      pode ser bloqueado por CSP). O createElement + appendChild funciona pois o
      script é síncrono e o head ainda está sendo construído.
      
      Critérios para o Chrome Android mostrar o prompt de instalação (qualquer versão):
      1. ✅ manifest.json válido com name, icons (192px any + 512px maskable), start_url, display
      2. ✅ Service Worker registrado com fetch handler
      3. ✅ HTTPS
      4. ✅ Ícones servidos sem erro
      5. ✅ Chrome >= 119: screenshots recomendadas (adicionadas ao manifest)
      6. ✅ prefer_related_applications: false (ou ausente)
    -->
    <script>
      (function() {
        var path = window.location.pathname;
        var isSindicato = path.startsWith('/app') || path.startsWith('/sindicato');
        
        if (isSindicato) {
          // --- SECMI / Sindicato branding ---
          // Manifest: injeta ANTES do vite-plugin-pwa para o Chrome encontrar o correto
          var manifestLink = document.createElement('link');
          manifestLink.rel = 'manifest';
          manifestLink.href = '/manifest-sindicato.webmanifest';
          document.head.appendChild(manifestLink);
          
          // Favicon sindicato
          var favicon = document.createElement('link');
          favicon.rel = 'icon';
          favicon.type = 'image/png';
          favicon.href = '/apple-touch-icon-sindicato.png';
          document.head.appendChild(favicon);
          
          // Apple touch icon sindicato
          var appleIcon = document.createElement('link');
          appleIcon.rel = 'apple-touch-icon';
          appleIcon.href = '/apple-touch-icon-sindicato.png';
          document.head.appendChild(appleIcon);
          
          // Apple app title sindicato
          var appTitleMeta = document.createElement('meta');
          appTitleMeta.name = 'apple-mobile-web-app-title';
          appTitleMeta.content = 'SECMI';
          document.head.appendChild(appTitleMeta);
          
          var appNameMeta = document.createElement('meta');
          appNameMeta.name = 'application-name';
          appNameMeta.content = 'SECMI';
          document.head.appendChild(appNameMeta);
        } else {
          // --- Eclini branding (padrão) ---
          var favicon = document.createElement('link');
          favicon.rel = 'icon';
          favicon.type = 'image/png';
          favicon.href = '/favicon-eclini.png';
          document.head.appendChild(favicon);
          
          var appleIcon = document.createElement('link');
          appleIcon.rel = 'apple-touch-icon';
          appleIcon.href = '/favicon-eclini.png';
          document.head.appendChild(appleIcon);
          
          var appTitleMeta = document.createElement('meta');
          appTitleMeta.name = 'apple-mobile-web-app-title';
          appTitleMeta.content = 'Eclini';
          document.head.appendChild(appTitleMeta);
          
          var appNameMeta = document.createElement('meta');
          appNameMeta.name = 'application-name';
          appNameMeta.content = 'Eclini';
          document.head.appendChild(appNameMeta);
        }
      })();
    </script>
    
    <!--
      O vite-plugin-pwa injeta automaticamente um <link rel="manifest"> aqui.
      Para rotas /app e /sindicato, o script acima já injetou o manifest SECMI PRIMEIRO.
      Quando o browser encontra dois <link rel="manifest">, usa o PRIMEIRO encontrado
      (no caso de Chrome Android, que é o que importa para instalação).
      O script abaixo remove duplicatas ao carregar o DOM para evitar conflitos.
    -->
    <script>
      (function() {
        var path = window.location.pathname;
        if (path.startsWith('/app') || path.startsWith('/sindicato')) {
          // Remove quaisquer manifests extras adicionados pelo vite-plugin-pwa
          // mantendo apenas o primeiro (manifest-sindicato.webmanifest)
          document.addEventListener('DOMContentLoaded', function() {
            var links = document.querySelectorAll('link[rel="manifest"]');
            for (var i = 1; i < links.length; i++) {
              links[i].parentNode && links[i].parentNode.removeChild(links[i]);
            }
          });
        }
      })();
    </script>
    
    <!-- Splash Screen Background Color for PWA -->
    <style>
      html, body, #root {
        background-color: #16a394 !important;
      }
    </style>
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://sisvida.lovable.app" />
    <meta property="og:title" content="Eclini - Sistema para Clínicas" />
    <meta property="og:description" content="Sistema de gestão para clínicas médicas e consultórios." />
    <meta property="og:image" content="https://sisvida.lovable.app/pwa-512x512.png" />
    <meta property="og:image:width" content="512" />
    <meta property="og:image:height" content="512" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:locale" content="pt_BR" />
    <meta property="og:site_name" content="Eclini" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:url" content="https://sisvida.lovable.app" />
    <meta name="twitter:title" content="Eclini - Sistema para Clínicas" />
    <meta name="twitter:description" content="Sistema de gestão para clínicas médicas e consultórios." />
    <meta name="twitter:image" content="https://sisvida.lovable.app/pwa-512x512.png" />
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#16a394" />
    <meta name="msapplication-TileColor" content="#16a394" />
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Eclini",
      "applicationCategory": "HealthApplication",
      "operatingSystem": "Web",
      "description": "Sistema de gestão para clínicas médicas e consultórios. Agendamento online, prontuário eletrônico, controle financeiro.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "BRL"
      },
      "provider": {
        "@type": "Organization",
        "name": "Tecmax Tecnologia",
        "telephone": "+55 71 98278-6864"
      }
    }
    </script>
    
    <!-- OneSignal SDK -->
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  </head>

  <body style="background-color: #16a394;">
    <div id="root" style="background-color: #16a394; min-height: 100vh;"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
